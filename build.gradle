group = 'uk.co.o2'
version = '1.0'
apply plugin: 'scala'

repositories {
    mavenCentral()
    maven{
        url "https://oss.sonatype.org/content/groups/public"
    }
}

buildscript {
    repositories{
        maven{
            url "https://raw.github.com/rodionmoiseev/maven-repo/master/repo/releases"
        }
    }
    dependencies {
        classpath group: 'org.rodion.gradle', name: 'idea-scala-plugin', version: '0.2'
    }
}

apply plugin: 'idea-scala'

ideaScala{
    compiler {
        scalacBefore = false
        fsc {
            enable = true
            maxHeapSize = 1024
            vmParameters = '-Xms128m -Xss1m -server'
        }
    }
}

idea{
    project {
        jdkName = '1.6'
        languageLevel = '1.6'
    }
}

ext.scalaVersion = "2.10.0-RC1"
ext.cucumberVersion = "1.1.1"

dependencies {

    scalaApi "org.scala-lang:scala-library:${scalaVersion}"
    scalaTools "org.scala-lang:scala-compiler:${scalaVersion}"
    scalaTools "org.scala-lang:scala-library:${scalaVersion}"

    compile "org.scala-lang:scala-library:${scalaVersion}"
    compile "org.scala-lang:scala-compiler:${scalaVersion}"


    compile "org.seleniumhq.selenium:selenium-java:2.26.0"
    compile "org.scalatest:scalatest_${scalaVersion}:2.0.M4"

    compile "info.cukes:cucumber-core:${cucumberVersion}"
    compile "info.cukes:cucumber-scala:${cucumberVersion}"
    testCompile "info.cukes:cucumber-junit:${cucumberVersion}"
    testCompile 'junit:junit:4.11'
}

test {
// Uncomment to use firefox. By default it uses HtmlUnit driver
//    systemProperties['driver'] = 'firefox'
}

idea.project.ipr.withXml { provider ->
    def vcsConfig = provider.asNode().component.find { it.'@name' == 'VcsDirectoryMappings' }
    vcsConfig.mapping[0].'@vcs' = 'Git'
}
